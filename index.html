<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Questionário – Quem é você? </title>
<style>
  :root{
    --bg:#ffffff;              /* fundo principal branco */
    --ink:#111827;             /* texto principal */
    --muted:#6b7280;           /* texto secundário */
    --panel:#ffffff;           /* cartões */
    --border:#e5e7eb;          /* bordas finas */
    --primary:#3b1a66;         /* roxo escuro */
    --emerald:#065f46;         /* verde esmeralda escuro */
    --emerald-bright:#10b981;  /* verde p/ realce */
    --ok:#16a34a;              /* ok */
    --err:#dc2626;             /* erro */
  }

  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,Arial,sans-serif}
  header{padding:22px 16px 10px;border-bottom:2px solid var(--primary);background:#fafafa}
  header h1{font-size:22px;margin:0 0 6px;color:var(--primary)}
  header p{margin:0;color:var(--muted);font-size:14px}

  main{max-width:980px;margin:0 auto;padding:16px}
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:14px 0 6px}
  .field{display:flex;flex-direction:column;gap:6px}
  .field label{font-size:13px;color:var(--muted)}
  .field input{border:1px solid var(--border);border-radius:12px;padding:12px;background:#fff}

  .conjunto{border:1px solid var(--border);border-radius:14px;padding:14px 14px 10px;margin:14px 0;background:var(--panel)}
  .conjunto[data-valid="true"]{border-color:var(--emerald-bright)}
  .conjunto[data-valid="false"]{border-color:var(--err)}
  .top{display:flex;align-items:center;gap:10px;margin-bottom:10px}
  .badge{font-size:12px;color:#fff;background:var(--primary);border-radius:999px;padding:4px 8px}
  .help{font-size:13px;color:var(--muted)}
  .preview-label{display:none !important;} /* oculto no UI */

  .lista{display:grid;grid-template-columns:minmax(0,1fr) auto;row-gap:10px;column-gap:12px;align-items:center}
  .item{display:contents}
  .texto{line-height:1.35}
  select{
    appearance:none;background:#fff;border:1px solid var(--border);border-radius:10px;
    padding:8px 10px;min-width:80px
  }
  select:invalid{color:#9ca3af}
  .sum{margin-top:10px;font-size:12px;color:var(--muted)}
  .sum.ok{color:var(--emerald)}
  .sum.err{color:var(--err)}

  .footer-actions{display:flex;gap:12px;align-items:center;justify-content:flex-end;
    padding:16px;border-top:1px solid var(--border);margin-top:12px;flex-wrap:wrap}
  button{border:0;border-radius:12px;padding:12px 16px;font-weight:600;cursor:pointer}
  .btn-primary{background:var(--primary);color:#fff}
  .btn-primary:disabled{opacity:.5;cursor:not-allowed}

  .alert{display:none;margin:10px 0 0;color:#fff;background:var(--err);
    padding:12px;border-radius:10px;font-size:14px}
  .okmsg{display:none;margin:10px 0 0;color:var(--emerald);background:#e8fff5;
    padding:12px;border-radius:10px;font-size:14px;border:1px solid #bbf7d0}

  /* Resultado visível na tela */
  .result-box{display:none;margin-top:14px;background:#f9fafb;border:1px solid var(--border);
    border-radius:12px;padding:14px}
  .result-box h3{margin:0 0 10px;font-size:18px;color:var(--emerald)}
  .result-box pre{white-space:pre-wrap;word-wrap:break-word;color:#111827;
    background:#fff;border:1px dashed var(--border);padding:10px;border-radius:8px}
  .result-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
  .btn-outline{background:#fff;border:1px solid var(--primary);color:var(--primary)}
  .btn-outline:active{transform:translateY(1px)}
  @media (max-width:640px){.grid2{grid-template-columns:1fr}}
  @media (hover:none){select{min-height:44px}}
</style>
</head>
<body>
  <header>
    <h1>Questionário</h1>
    <p>Atribua <strong>4, 3, 2 e 1</strong> em cada conjunto (sem repetir). O nome/tema do conjunto fica oculto ao respondente.</p>
  </header>

  <main>
    <form id="formQuiz" novalidate>
      <!-- Identificação -->
      <div class="grid2" aria-label="Identificação">
        <div class="field">
          <label for="nome">Nome completo</label>
          <input id="nome" name="nome" type="text" placeholder="Digite seu nome" required />
        </div>
        <div class="field">
          <label for="email">E-mail (opcional)</label>
          <input id="email" name="email" type="email" placeholder="voce@email.com" />
        </div>
      </div>

      <!-- ======= CONJUNTO A ======= -->
      <section class="conjunto" data-conjunto="Direcionado ➜ Diretivo" data-valid="false">
        <div class="top"><span class="badge">A</span><span class="help">Atribua 4/3/2/1 (sem repetir).</span></div>
        <div class="lista" role="group" aria-label="Conjunto A">
          <div class="item" data-trait="Confiante em si"><div class="texto">Confiante em si</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Otimista"><div class="texto">Otimista</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Deliberado"><div class="texto">Deliberado</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Contido"><div class="texto">Contido</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
        </div>
        <div class="sum">Soma: 0 / 10</div>
      </section>

      <!-- ======= CONJUNTO B ======= -->
      <section class="conjunto" data-conjunto="Aventureiro ➜ Experiencial" data-valid="false">
        <div class="top"><span class="badge">B</span><span class="help">Atribua 4/3/2/1 (sem repetir).</span></div>
        <div class="lista" role="group" aria-label="Conjunto B">
          <div class="item" data-trait="Aventureiro"><div class="texto">Aventureiro</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Metódico"><div class="texto">Metódico</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Analítico"><div class="texto">Analítico</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Sociável"><div class="texto">Sociável</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
        </div>
        <div class="sum">Soma: 0 / 10</div>
      </section>

      <!-- ======= CONJUNTO C ======= -->
      <section class="conjunto" data-conjunto="Planejamento ➜ Organização" data-valid="false">
        <div class="top"><span class="badge">C</span><span class="help">Atribua 4/3/2/1 (sem repetir).</span></div>
        <div class="lista" role="group" aria-label="Conjunto C">
          <div class="item" data-trait="Organizado"><div class="texto">Organizado</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Flexível"><div class="texto">Flexível</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Pragmático"><div class="texto">Pragmático</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Criativo"><div class="texto">Criativo</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
        </div>
        <div class="sum">Soma: 0 / 10</div>
      </section>

      <!-- ======= CONJUNTO D ======= -->
      <section class="conjunto" data-conjunto="Relacionamento ➜ Influência" data-valid="false">
        <div class="top"><span class="badge">D</span><span class="help">Atribua 4/3/2/1 (sem repetir).</span></div>
        <div class="lista" role="group" aria-label="Conjunto D">
          <div class="item" data-trait="Comunicativo"><div class="texto">Comunicativo</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Empático"><div class="texto">Empático</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Persuasivo"><div class="texto">Persuasivo</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Reservado"><div class="texto">Reservado</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
        </div>
        <div class="sum">Soma: 0 / 10</div>
      </section>

      <!-- ======= CONJUNTO E ======= -->
      <section class="conjunto" data-conjunto="Execução ➜ Ritmo" data-valid="false">
        <div class="top"><span class="badge">E</span><span class="help">Atribua 4/3/2/1 (sem repetir).</span></div>
        <div class="lista" role="group" aria-label="Conjunto E">
          <div class="item" data-trait="Ágil"><div class="texto">Ágil</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Cauteloso"><div class="texto">Cauteloso</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Persistente"><div class="texto">Persistente</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Adaptável"><div class="texto">Adaptável</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
        </div>
        <div class="sum">Soma: 0 / 10</div>
      </section>

      <!-- ======= CONJUNTO F ======= -->
      <section class="conjunto" data-conjunto="Decisão ➜ Critério" data-valid="false">
        <div class="top"><span class="badge">F</span><span class="help">Atribua 4/3/2/1 (sem repetir).</span></div>
        <div class="lista" role="group" aria-label="Conjunto F">
          <div class="item" data-trait="Racional"><div class="texto">Racional</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Intuitivo"><div class="texto">Intuitivo</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Detalhista"><div class="texto">Detalhista</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Visionário"><div class="texto">Visionário</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
        </div>
        <div class="sum">Soma: 0 / 10</div>
      </section>

      <!-- ======= CONJUNTO G ======= -->
      <section class="conjunto" data-conjunto="Resiliência ➜ Emoção" data-valid="false">
        <div class="top"><span class="badge">G</span><span class="help">Atribua 4/3/2/1 (sem repetir).</span></div>
        <div class="lista" role="group" aria-label="Conjunto G">
          <div class="item" data-trait="Estável"><div class="texto">Estável</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Sensível"><div class="texto">Sensível</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Confiante"><div class="texto">Confiante</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Atento ao outro"><div class="texto">Atento ao outro</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
        </div>
        <div class="sum">Soma: 0 / 10</div>
      </section>

      <!-- ======= CONJUNTO H ======= -->
      <section class="conjunto" data-conjunto="Estratégia ➜ Resultado" data-valid="false">
        <div class="top"><span class="badge">H</span><span class="help">Atribua 4/3/2/1 (sem repetir).</span></div>
        <div class="lista" role="group" aria-label="Conjunto H">
          <div class="item" data-trait="Orientado a metas"><div class="texto">Orientado a metas</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Colaborativo"><div class="texto">Colaborativo</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Independente"><div class="texto">Independente</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
          <div class="item" data-trait="Orientado a processos"><div class="texto">Orientado a processos</div><select required><option value="" disabled selected>—</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
        </div>
        <div class="sum">Soma: 0 / 10</div>
      </section>

      <div class="footer-actions">
        <button class="btn-primary" id="btnEnviar" type="submit" disabled>Finalizar</button>
      </div>

      <div class="alert" id="alerta"></div>
      <div class="okmsg" id="okmsg">Respostas registradas.</div>

      <div class="result-box" id="resultBox">
        <h3>Seu resultado</h3>
        <pre id="resultText"></pre>
        <div class="result-actions">
          <button type="button" class="btn-outline" id="btnCopy">Copiar resultado</button>
          <button type="button" class="btn-outline" id="btnPrint">Imprimir/Salvar PDF</button>
        </div>
      </div>
    </form>
  </main>

<script>
(function(){
  const form = document.getElementById('formQuiz');
  const conjuntos = [...document.querySelectorAll('.conjunto')];
  const btnEnviar = document.getElementById('btnEnviar');
  const alerta = document.getElementById('alerta');
  const okmsg  = document.getElementById('okmsg');
  const resultBox  = document.getElementById('resultBox');
  const resultText = document.getElementById('resultText');
  const btnCopy = document.getElementById('btnCopy');
  const btnPrint = document.getElementById('btnPrint');

  // Atualização por conjunto: bloqueio de repetição e soma=10
  conjuntos.forEach((cj) => {
    const selects = [...cj.querySelectorAll('select')];
    const sumEl   = cj.querySelector('.sum');

    function updateState(){
      const values = selects.map(s => s.value).filter(Boolean);

      // Impedir repetir 4/3/2/1
      selects.forEach(s => {
        const current = s.value;
        [...s.options].forEach(opt => {
          if(!opt.value) return;
          const used = values.includes(opt.value);
          opt.disabled = used && opt.value !== current;
        });
      });

      // Soma e status
      const sum = values.map(Number).reduce((a,b)=>a+b,0);
      sumEl.textContent = `Soma: ${sum} / 10`;
      const complete = values.length === 4;
      const valid    = complete && sum === 10 && new Set(values).size === 4;
      cj.dataset.valid = valid ? 'true' : 'false';
      sumEl.className = 'sum ' + (valid ? 'ok' : (complete ? 'err' : ''));

      validateForm();
    }

    selects.forEach(s => s.addEventListener('change', updateState));
    updateState();
  });

  function idOk(){
    const nome = document.getElementById('nome').value.trim();
    return nome.length >= 3; // e-mail é opcional
  }

  function validateForm(){
    const allValid = conjuntos.every(cj => cj.dataset.valid === 'true');
    btnEnviar.disabled = !(allValid && idOk());
    alerta.style.display = 'none';
    okmsg.style.display  = 'none';
  }
  form.addEventListener('input', validateForm);

  function readyToSend(){
    const invalids = conjuntos.filter(cj => cj.dataset.valid !== 'true');
    if(!idOk()){
      alerta.textContent = 'Preencha o Nome corretamente.';
      alerta.style.display = 'block';
      window.scrollTo({top:0, behavior:'smooth'});
      return false;
    }
    if(invalids.length){
      alerta.textContent = 'Em cada conjunto use 4, 3, 2 e 1 (sem repetir) e totalize 10.';
      alerta.style.display = 'block';
      window.scrollTo({top:invalids[0].offsetTop - 24, behavior:'smooth'});
      return false;
    }
    return true;
  }

  function coletarRespostas(){
    const out = {
      nome: document.getElementById('nome').value.trim(),
      email: document.getElementById('email').value.trim(),
      respostas: {}
    };
    conjuntos.forEach((cj, i) => {
      const nomeInterno = cj.getAttribute('data-conjunto') || `Conjunto ${i+1}`;
      const items = [...cj.querySelectorAll('.item')].map(it => ({
        trait: it.getAttribute('data-trait'),
        valor: Number(it.querySelector('select').value || 0)
      }));
      out.respostas[nomeInterno] = items;
    });
    return out;
  }

  function montarMensagem(data){
    let linhas = [];
    linhas.push('Resultados do Questionário (4•3•2•1)');
    linhas.push(`Nome: ${data.nome}`);
    if(data.email) linhas.push(`E-mail: ${data.email}`);
    linhas.push('');
    const keys = Object.keys(data.respostas);
    keys.forEach((interno, idx) => {
      const titulo = `Conjunto ${String.fromCharCode(65+idx)} — ${interno}`; // “interno” só no resultado
      linhas.push(titulo);
      const itens = data.respostas[interno];
      itens.forEach(it => linhas.push(`• ${it.trait}: ${it.valor}`));
      const soma = itens.reduce((a,b)=>a+Number(b.valor||0),0);
      linhas.push(`Soma: ${soma}`);
      linhas.push('');
    });
    return linhas.join('\n');
  }

  // Finalizar: mostra resultado em tela (sem downloads)
  form.addEventListener('submit', (e) => {
    e.preventDefault();
    if(!readyToSend()) return;
    const data  = coletarRespostas();
    const texto = montarMensagem(data);
    resultText.textContent = texto;
    resultBox.style.display = 'block';
    alerta.style.display = 'none';
    okmsg.style.display = 'block';
    resultBox.scrollIntoView({behavior:'smooth', block:'start'});
  });

  // Utilidades do resultado
  btnCopy.addEventListener('click', async () => {
    try{
      await navigator.clipboard.writeText(resultText.textContent);
      btnCopy.textContent = 'Copiado!';
      setTimeout(()=>btnCopy.textContent='Copiar resultado',1500);
    }catch(e){
      alert('Não foi possível copiar automaticamente. Selecione o texto e copie.');
    }
  });
  btnPrint.addEventListener('click', () => {
    window.print();
  });

  validateForm(); // estado inicial
})();
</script>
</body>
</html>
